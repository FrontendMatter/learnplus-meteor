<template name="Navbar">
  <nav id="default-navbar" class="navbar navbar-expand navbar-dark bg-primary m-0">
    <div class="container-fluid">
      <!-- Toggle sidebar -->
      <button class="navbar-toggler d-block" data-toggle="sidebar" type="button">
        <span class="material-icons">menu</span>
      </button>

      <!-- Brand -->
      {{#linkTo route="student-dashboard" class="navbar-brand" }}
        <img src="/images/logo/white.svg" class="mr-2" alt="LearnPlus" />
        <span class="d-none d-xs-md-block">LearnPlus</span>
      {{/linkTo}}
      
      <!-- Search -->
      <form class="search-form d-none d-md-flex">
        <input type="text" class="form-control" placeholder="Search">
        <button class="btn" type="button"><i class="material-icons font-size-24pt">search</i></button>
      </form>
      <!-- // END Search -->

      <div class="flex"></div>
      
      <!-- Menu --> 
      <ul class="nav navbar-nav flex-nowrap d-none d-lg-flex">
        <li class="nav-item">
          <a class="nav-link" href="#forum">Forum</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#help-center">Get Help</a>
        </li>
      </ul>
      
      <!-- Menu -->
      <ul class="nav navbar-nav flex-nowrap">

        <li class="nav-item d-none d-md-flex">
          <a href="#cart" class="nav-link">
            <i class="material-icons">shopping_cart</i>
          </a>
        </li>
        
        {{> NavbarNotifications}}

        <li class="nav-item dropdown ml-1 ml-md-3">
          <a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" role="button"><img src="/images/people/50/guy-6.jpg" alt="Avatar" class="rounded-circle" width="40"></a>
          <div class="dropdown-menu dropdown-menu-right">
            <a class="dropdown-item" href="#account-edit">
              <i class="material-icons">edit</i> Edit Account
            </a>
            <a class="dropdown-item" href="#profile">
              <i class="material-icons">person</i> Public Profile
            </a>
            <a class="dropdown-item" href="#guest-login">
              <i class="material-icons">lock</i> Logout
            </a>
          </div>
        </li>

      </ul>
      <!-- // END Menu -->
    </div>
  </nav>
</template>

<template name="NavbarNotifications">
  <li class="nav-item dropdown dropdown-notifications dropdown-menu-sm-full">
    <button class="nav-link btn-flush dropdown-toggle" type="button" data-toggle="dropdown" data-dropdown-disable-document-scroll data-caret="false">
      <i class="material-icons">notifications</i>
      <span class="badge badge-notifications badge-danger">2</span>
    </button>
    <div class="dropdown-menu dropdown-menu-right">
      <div data-perfect-scrollbar class="position-relative">
        <div class="dropdown-header"><strong>Messages</strong></div>
        <div class="list-group list-group-flush mb-0">
          {{#each item in messages}}
          <a href="#messages" class="list-group-item list-group-item-action{{#if item.unread }} unread{{/if}}">
            <span class="d-flex align-items-center mb-1">
              <small class="text-muted">{{ item.date }}</small>
              {{#if item.unread }}
              <span class="ml-auto unread-indicator bg-primary"></span>
              {{/if}}
            </span>
            <span class="d-flex">
              <span class="avatar avatar-xs mr-2">
                <img src="{{ item.avatar }}" alt="people" class="avatar-img rounded-circle">
              </span>
              <span class="flex d-flex flex-column">
                <strong>{{ item.name }}</strong>
                <span class="text-black-70">{{ item.message }}</span>
              </span>
            </span>
          </a>
          {{/each}}
        </div>

        <div class="dropdown-header"><strong>System notifications</strong></div>
        <div class="list-group list-group-flush mb-0">
          {{#each item in notifications }}
          <a href="#messages" class="list-group-item list-group-item-action{{#if item.unread }} unread{{/if}}{{#if item.important }} border-left-3 border-left-danger{{/if}}">
            <span class="d-flex align-items-center mb-1">
              <small class="text-muted">{{ item.created_at }}</small>
              {{#if item.unread }}
              <span class="ml-auto unread-indicator bg-primary"></span>
              {{/if}}
            </span>
            <span class="d-flex">
              <span class="avatar avatar-xs mr-2">
                <span class="avatar-title rounded-circle bg-light">
                  <i class="material-icons font-size-16pt {{ item.icon_class }}">{{ item.icon }}</i>
                </span>
              </span>
              <span class="flex d-flex flex-column">
                {{#if item.name }}<strong>{{ item.name }}</strong>{{/if}}
                <span class="text-black-70">{{ item.message }}</span>
              </span>
            </span>
          </a>
          {{/each}}
        </div>
      </div>
    </div>
  </li>
</template>
